<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test</title>
    </head>

    <body>
        <div id="test_container"></div>
    </body>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script>
        class Queue {
            constructor() {
                this.queued_items = new Array();
            }
            enqueue(element_in) {
                this.queued_items.push(element_in);
            }
            dequeue() {
                if (this.is_empty())
                    return "Error";
                return this.queued_items.shift();
            }
            front() {
                if (this.is_empty())
                    return "No elements in Queue";
                return this.queued_items[0];
            }
            is_empty() {
                return this.queued_items.length == 0;
            }
            output_queue() {
                let output;
                for (let i = 0; i < this.queued_items.length; i++)
                    output += this.queued_items[i] + " ";
                return output;
            }
            len() {
                return this.queued_items.length;
            }
        }

        let test_queue = new Queue();

        $(function () {
            // Test
            getDefData();

            let timer = window.setInterval(function () {
                getGenInt()
            }, 1000)

            function getGenInt() {
                $.ajax({
                    url: "/gen_int",
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        test_queue.enqueue(data);
                        console.log(test_queue);
                        if (test_queue.len() == 10) {
                            clearInterval(timer);
                        }
                    }
                });
            }

            function getDefData() {
                $.ajax({
                    url: "/def_data",
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        console.log(data);
                        document.getElementById("test_container").innerHTML = "Success, the passed data is: " + data.score;
                        // let get_def_data = parseData(JSON.stringify(data));
                        // console.log("Datatype of get_def_data: " + typeof(get_def_data));
                        // document.getElementById("test_container").innerHTML = "Success, the passed data is: " + get_def_data;
                    }
                });
            }
        });

        function parseData(get_def_data) {
            return parseInt(get_def_data.substring(get_def_data.indexOf(':') + 1, get_def_data.length - 1));
        }
    </script>
</html>